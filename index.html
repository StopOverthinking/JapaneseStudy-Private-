<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì¼ë³¸ì–´ ë‹¨ì–´ í•™ìŠµ</title>
    <link rel="stylesheet" href="style.css">
    <style>
        /* ì´ì–´í•˜ê¸° ì˜¤ë²„ë ˆì´ ìŠ¤íƒ€ì¼ */
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.6);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2000;
        }
        .overlay-content {
            background-color: white;
            padding: 2rem;
            border-radius: 12px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            max-width: 90%;
            width: 400px;
        }
        .overlay-buttons {
            margin-top: 20px;
            display: flex;
            gap: 15px;
            justify-content: center;
        }
        .overlay-buttons button {
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1rem;
            transition: transform 0.1s;
        }
        .overlay-buttons button:active {
            transform: scale(0.98);
        }
        #btn-resume-yes {
            background-color: #4CAF50;
            color: white;
            font-weight: bold;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            transform: scale(1.05); /* 'ì˜ˆ' ë²„íŠ¼ ê°•ì¡° */
        }
        #btn-resume-no {
            background-color: #9e9e9e;
            color: white;
        }
    </style>
</head>
<body>
    <div id="app-container">
        <!-- ì‹œì‘ í™”ë©´ / ëª¨ë“œ ì„ íƒ -->
        <div id="start-screen" class="screen active">
            <h1>ì¼ë³¸ì–´ ë‹¨ì–´ í•™ìŠµ</h1>
            <div class="mode-selection">
                <button id="start-list-btn">ëª©ë¡ ëª¨ë“œ</button>
                <p class="mode-description">ì „ì²´ ë‹¨ì–´ë¥¼ ëª©ë¡ìœ¼ë¡œ ë´…ë‹ˆë‹¤.</p>
            </div>
            <div class="mode-selection">
                <button id="start-learning-btn">í•™ìŠµ ëª¨ë“œ</button>
                <p class="mode-description">ì¹´ë“œë¥¼ ë„˜ê¸°ë©° ë‹¨ì–´ë¥¼ í•™ìŠµí•©ë‹ˆë‹¤.</p>
            </div>
            <div class="mode-selection">
                <button id="start-game-mode-btn" style="background-color: #9C27B0;">ê²Œì„ ëª¨ë“œ</button>
                <p class="mode-description">ë‹¤ì–‘í•œ í•™ìŠµ ê²Œì„ì„ ì¦ê²¨ë³´ì„¸ìš”.</p>
            </div>
        </div>

        <!-- ëª©ë¡ ëª¨ë“œ -->
        <div id="list-mode" class="screen">
            <h2>ë‹¨ì–´ ëª©ë¡</h2>
            <div id="list-controls" class="hidden">
                <button id="toggle-word-btn">ë‹¨ì–´ ìˆ¨ê¸°ê¸°</button>
                <button id="toggle-meaning-btn">ëœ» ìˆ¨ê¸°ê¸°</button>
            </div>
            <div id="vocabulary-list-container"></div>
            <button id="back-to-start-btn">ëŒì•„ê°€ê¸°</button>
        </div>

        <!-- í•™ìŠµ ëª¨ë“œ -->
        <div id="learning-mode" class="screen">
            <div class="screen-header">
                <button id="back-to-start-from-learning" class="back-btn">â€¹ ëŒì•„ê°€ê¸°</button>
            </div>
            <h2>í•™ìŠµ ëª¨ë“œ</h2>
            <div id="learning-setup">
                <div class="setting-item">
                    <label for="vocab-set-select">í•™ìŠµí•  ë‹¨ì–´ì¥:</label>
                    <select id="vocab-set-select"></select>
                </div>
                <div class="setting-item" id="range-setting-container">
                    <label class="range-toggle-label">
                        <input type="checkbox" id="range-checkbox"> í•™ìŠµ ë²”ìœ„ ì§€ì •
                    </label>
                    <div id="range-selection" class="hidden">
                        <input type="number" id="range-start" min="1" placeholder="ì‹œì‘">
                        <span>~</span>
                        <input type="number" id="range-end" min="1" placeholder="ë">
                    </div>
                </div>
                <div class="setting-item">
                    <label for="word-count">í•™ìŠµí•  ë‹¨ì–´ ê°œìˆ˜:</label>
                    <div class="word-count-wrapper">
                        <input type="number" id="word-count" value="10" min="1">
                        <div id="word-count-controls" class="word-count-controls">
                            <button data-value="10">+10</button> <button data-value="5">+5</button> <button data-value="1">+1</button>
                            <button data-value="-10">-10</button> <button data-value="-5">-5</button> <button data-value="-1">-1</button>
                        </div>
                    </div>
                </div>
                <fieldset>
                    <legend>ì¹´ë“œ ì•ë©´ í‘œì‹œ:</legend>
                    <label><input type="radio" name="initial-display" value="japanese" checked> ì¼ë³¸ì–´/ë…ìŒ</label>
                    <label><input type="radio" name="initial-display" value="meaning"> ëœ»</label>
                </fieldset>
                <button id="start-session-btn">í•™ìŠµ ì‹œì‘</button>
            </div>

            <div id="flashcard-session" class="hidden">
                <div class="card-container">
                    <button id="btn-prev-card" class="prev-card-btn">â€¹</button>
                    <button id="btn-favorite" class="favorite-btn">â˜†</button>
                    <div id="flashcard" class="flashcard">
                        <div class="card-face card-front">
                            <!-- ì¼ë³¸ì–´/ë…ìŒ ë˜ëŠ” ëœ»ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤. -->
                            <p class="japanese-text"></p>
                            <p class="reading-text"></p>
                        </div>
                        <div class="card-face card-back">
                            <!-- ë°˜ëŒ€ ë‚´ìš©ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤. -->
                            <p class="meaning-text"></p>
                        </div>
                    </div>
                </div>
                <div class="learning-options">
                    <label><input type="checkbox" id="toggle-reading-checkbox"> ë…ìŒ ìˆ¨ê¸°ê¸°</label>
                </div>
                <div class="card-actions">
                    <button id="btn-known" class="action-btn known">ì•Œê³  ìˆìŒ</button>
                    <button id="btn-unknown" class="action-btn unknown">ëª¨ë¦„</button>
                </div>
                <p id="progress-text">0/0</p>
            </div>
        </div>

        <!-- ê²Œì„ ì„ íƒ ëª¨ë“œ (ì‹ ê·œ) -->
        <div id="game-selection-mode" class="screen">
            <div class="screen-header">
                <button id="back-to-start-from-game-selection" class="back-btn">â€¹ ëŒì•„ê°€ê¸°</button>
            </div>
            <h2>ê²Œì„ ì„ íƒ</h2>
            <div class="mode-selection">
                <button id="open-speed-quiz-btn" style="background-color: #FF9800;">ìŠ¤í”¼ë“œí€´ì¦ˆ</button>
                <p class="mode-description">ìŠ¤í”¼ë“œ ê°ê´€ì‹ í€´ì¦ˆ (30ë¬¸ì œ)</p>
            </div>
        </div>

        <!-- ìŠ¤í”¼ë“œí€´ì¦ˆ ëª¨ë“œ -->
        <div id="speed-quiz-mode" class="screen">
            <div class="screen-header">
                <button id="back-to-start-from-speed-quiz" class="back-btn">â€¹ ê·¸ë§Œë‘ê¸°</button>
            </div>

            <!-- ëª¨ë“œ ì„ íƒ ë©”ë‰´ (ì‹ ê·œ) -->
            <div id="speed-quiz-menu">
                <h2 style="margin-top: 0;">ìŠ¤í”¼ë“œí€´ì¦ˆ ëª¨ë“œ ì„ íƒ</h2>
                <div class="quiz-mode-buttons">
                    <button id="btn-single-mode" class="mode-select-btn">ì‹±ê¸€ í”Œë ˆì´</button>
                    <button id="btn-vs-bot-mode" class="mode-select-btn">VS ë´‡ ëŒ€ê²° (ì¤€ë¹„ì¤‘)</button>
                </div>
                
                <!-- ì‹±ê¸€ í”Œë ˆì´ ê¸°ë¡ -->
                <div id="single-mode-records" class="records-container">
                    <h3>ğŸ† ëª…ì˜ˆì˜ ì „ë‹¹ (Top 10)</h3>
                    <ul id="record-list"></ul>
                </div>
            </div>

            <!-- ê²Œì„ ì˜ì—­ (ê¸°ì¡´ ìš”ì†Œë¥¼ ê°ìŒˆ) -->
            <div id="speed-quiz-game-area" class="hidden">
                <!-- ë ˆì´ìŠ¤ ë°” (ì‹ ê·œ) -->
                <div id="speed-quiz-race-track">
                    <div class="race-bar-row">
                        <span class="race-label">ë‚˜</span>
                        <div class="race-bar"><div id="player-race-fill" class="race-fill"></div></div>
                    </div>
                    <div class="race-bar-row hidden" id="bot-race-row">
                        <span class="race-label">ë´‡</span>
                        <div class="race-bar"><div id="bot-race-fill" class="race-fill bot"></div></div>
                    </div>
                </div>
                <div id="speed-quiz-status-bar">
                    <span id="speed-quiz-progress">1/30</span>
                    <span id="speed-quiz-score">ì ìˆ˜: 0</span>
                    <span id="speed-quiz-bot-score" class="hidden">ë´‡: 0</span>
                </div>
                <div id="speed-quiz-timer-bar"><div id="speed-quiz-timer-fill"></div></div>
                
                <div id="speed-quiz-content">
                    <div id="speed-quiz-question"></div>
                    <div id="speed-quiz-options"></div>
                </div>

                <!-- ë””ë²„ê·¸ ì •ë³´ (ì‹ ê·œ) -->
                <div id="speed-quiz-debug-info" class="hidden"></div>
            </div>
            
            <div id="speed-quiz-result" class="hidden">
                <h2>í€´ì¦ˆ ì¢…ë£Œ!</h2>
                <p style="font-size: 1.5em; margin: 20px;">ìµœì¢… ì ìˆ˜: <span id="final-score" style="font-weight:bold; color:#4CAF50;"></span></p>
                <p style="font-size: 1.1em; margin: 10px;">í‰ê·  ì†Œìš” ì‹œê°„: <span id="average-time" style="font-weight:bold;"></span>ì´ˆ</p>
                <div id="speed-quiz-wrong-list"></div>
                <button id="restart-speed-quiz-btn">ë©”ë‰´ë¡œ ëŒì•„ê°€ê¸°</button>
            </div>
        </div>

        <!-- ê²°ê³¼ í™”ë©´ (ì„ íƒ ì‚¬í•­) -->
        <div id="results-screen" class="screen">
            <h2>í•™ìŠµ ê²°ê³¼</h2>
            <p>ëª¨ë“  ë‹¨ì–´ë¥¼ í•™ìŠµí–ˆìŠµë‹ˆë‹¤!</p>
            <button id="restart-learning-btn">ë‹¤ì‹œ í•™ìŠµí•˜ê¸°</button>
        </div>
    </div>

    <!-- ì´ì–´í•˜ê¸° í™•ì¸ ì˜¤ë²„ë ˆì´ -->
    <div id="resume-overlay" class="overlay hidden">
        <div class="overlay-content">
            <h3>í•™ìŠµ ê¸°ë¡ ë°œê²¬</h3>
            <p>ì´ì „ì— ì™„ë£Œí•˜ì§€ ëª»í•œ í•™ìŠµì´ ìˆìŠµë‹ˆë‹¤.<br>ì´ì–´ì„œ ì§„í–‰í•˜ì‹œê² ìŠµë‹ˆê¹Œ?</p>
            <div class="overlay-buttons">
                <button id="btn-resume-yes">ì˜ˆ, ì´ì–´ì„œ í•©ë‹ˆë‹¤</button>
                <button id="btn-resume-no">ì•„ë‹ˆì˜¤, ìƒˆë¡œ ì‹œì‘í•©ë‹ˆë‹¤</button>
            </div>
        </div>
    </div>

    <script src="vocabulary.js"></script>
    <script src="vocab/vocab_pagoda.js"></script>
    <script src="vocab/vocab_example.js"></script>
    <script src="speed_quiz_mode.js"></script>
    <script src="app.js"></script>
</body>
</html>
